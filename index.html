<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arpit Dwivedi - Research & Projects</title>
  <meta name="description" content="Arpit Dwivedi â€” MS AeroAstro at Stanford. Research: control theory, machine learning, decision making for robotics, autonomous driving and space vehicles." />
  <meta name="author" content="Arpit Dwivedi" />
  <link rel="icon" href="images/favicon/favicon.ico" />

  <!-- Open Graph / Twitter -->
  <meta property="og:title" content="Arpit Dwivedi - Research & Projects" />
  <meta property="og:description" content="Controls & Planning Ã— Reinforcement Learning | Robotics" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="images/ArpitDwivedi.jpg" />
  <meta property="og:url" content="https://dwivedi07.github.io/" />
  <meta name="twitter:card" content="summary_large_image" />

  <style>
    /* ===== Design tokens ===== */
    :root{
      --bg:#e9eef5;--panel:#fff;--text:#0e1116;--muted:#526072;--link:#0b63ce;--link-visited:#6a4dd8;
      --accent:#1559b3;--border:#dde4ee;--shadow:0 10px 30px rgba(0,0,0,.08);
      --radius:16px;--maxw:1000px;--thumb-ar:16/9;--thumb-h-m:190px;--logo-h-m:110px
    }
    @media (prefers-color-scheme: light){
      :root{--bg:#e9eef5;--panel:#fff;--text:#0e1116;--muted:#526072;--border:#dde4ee;--shadow:0 10px 30px rgba(0,0,0,.08)}
    }

    /* ===== Reset / base ===== */
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font:16px/1.6 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(21,89,179,.10), transparent 40%),
        radial-gradient(900px 600px at 110% 10%, rgba(124,196,255,.10), transparent 50%),
        var(--bg);
      -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
      padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }
    a{color:var(--link);text-decoration:none}
    a:hover{text-decoration:underline}
    a:visited{color:var(--link-visited)}
    img{max-width:100%;height:auto;border-radius:12px;display:block}

    /* ===== Layout ===== */
    .container{max-width:var(--maxw);margin-inline:auto;padding:24px}
    header,section,footer{margin-block:28px}
    .panel{background:var(--panel);border:1px solid var(--border);border-radius:var(--radius);box-shadow:var(--shadow)}
    .pad{padding:20px}
    .grid{display:grid;gap:16px}
    .grid.cols-3{grid-template-columns:repeat(3,1fr)}

    /* ===== Header ===== */
    .topbar{display:flex;align-items:center;justify-content:space-between;gap:16px}
    .id{display:flex;align-items:center;gap:16px;min-width:0}
    .avatar{width:108px;aspect-ratio:1;border-radius:50%;object-fit:cover;border:2px solid var(--border);flex:0 0 auto}
    h1{font-size:clamp(28px,4vw,40px);line-height:1.1;margin:0;letter-spacing:.3px}
    .lead{color:var(--muted);margin:6px 0 0}

    .links{display:flex;flex-wrap:wrap;gap:10px 12px;align-items:center}
    .chip{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 14px;border:1px solid var(--border);border-radius:999px;background:#fff;cursor:pointer;white-space:nowrap}

    /* ===== Sections ===== */
    .section-title{font-size:22px;margin:0 0 10px}
    .card{display:flex;gap:16px;border:1px solid var(--border);border-radius:14px;background:linear-gradient(180deg,var(--panel),color-mix(in oklab,var(--panel),#000 6%));overflow:clip}
    /* .card .thumb{width:220px;max-width:38%;aspect-ratio:var(--thumb-ar);object-fit:cover;border-right:1px solid var(--border);margin:0} */
    .card .thumb{
  width:220px;
  max-width:38%;
  object-fit:contain; /* changed from cover */
  height:auto;        /* allow natural height */
  aspect-ratio:auto;  /* remove forced crop */
}
    .card .thumb.logo{object-fit:contain;background:transparent;padding:12px;width:220px;max-height:120px;border-right:1px solid var(--border)}
    .card-body{padding:16px}
    .meta{color:var(--muted);font-size:14px}
    .title{font-weight:600;font-size:18px;margin:2px 0 6px}
    .badge{display:inline-block;font-size:12px;padding:2px 8px;border:1px solid var(--border);border-radius:8px;color:var(--muted)}

    .affil{text-align:center;padding:16px;border:1px solid var(--border);border-radius:14px;background:var(--panel)}
    .affil img{max-height:70px;object-fit:contain;background:#fff0;margin-inline:auto}

    footer{color:var(--muted);font-size:14px;text-align:right}

    .nowrap{white-space:nowrap}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}

    /* ===== Mobile (fix header overlap) ===== */
    @media (max-width: 880px){
      .grid.cols-3{grid-template-columns:1fr}
      .topbar{flex-direction:column;align-items:stretch;gap:12px}
      .id{align-items:flex-start}
      .avatar{width:88px}
      /* Make link chips a tidy 2-col grid so they never collide with the name */
      .links{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
      .links .chip{width:100%} /* full-width buttons inside grid cells */
      /* Cards stack media on top */
      .card{flex-direction:column}
      .card .thumb{width:100%;max-width:100%;border-right:0;border-bottom:1px solid var(--border);aspect-ratio:var(--thumb-ar);max-height:var(--thumb-h-m)}
      .card .thumb.logo{aspect-ratio:auto;max-height:var(--logo-h-m);height:var(--logo-h-m);padding:10px;object-fit:contain}
    }

    /* ===== Desktop Mobile-Preview mode (force phone layout) ===== */
    body[data-preview="mobile"] .container{max-width:420px}
    body[data-preview="mobile"] .topbar{flex-direction:column;align-items:stretch;gap:12px}
    body[data-preview="mobile"] .links{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px}
    body[data-preview="mobile"] .links .chip{width:100%}
    body[data-preview="mobile"] .card{flex-direction:column}
    body[data-preview="mobile"] .card .thumb{width:100%;max-width:100%;border-right:0;border-bottom:1px solid var(--border);aspect-ratio:var(--thumb-ar);max-height:var(--thumb-h-m)}
    body[data-preview="mobile"] .card .thumb.logo{aspect-ratio:auto;max-height:var(--logo-h-m);height:var(--logo-h-m);padding:10px;object-fit:contain}

    @media print{
      .panel,.card,.affil{box-shadow:none}
      a{color:inherit;text-decoration:underline}
    }
  </style>

  <!-- JSON-LD -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org","@type":"Person",
    "name":"Arpit Dwivedi","image":"images/ArpitDwivedi.jpg","jobTitle":"Graduate Researcher",
    "affiliation":[{"@type":"Organization","name":"Stanford University"},{"@type":"Organization","name":"Autonomous Systems Lab"}],
    "url":"https://dwivedi07.github.io/","email":"mailto:dwivedi7@stanford.edu",
    "sameAs":["https://scholar.google.com/citations?user=bTxIik4AAAAJ&hl=en","https://github.com/Dwivedi07/"]
  }
  </script>
</head>
<body>
  <a class="sr-only" href="#main">Skip to content</a>
  <div class="container">

    <!-- ===== Header / Intro ===== -->
    <header class="panel pad">
      <div class="topbar">
        <div class="id">
          <img src="images/ArpitDwivedi.jpg" alt="Portrait of Arpit Dwivedi" class="avatar" loading="eager" />
          <div>
            <h1>Arpit Dwivedi</h1>
            <p class="lead">MS AeroAstro @ <a href="https://www.stanford.edu/" target="_blank" rel="noopener">Stanford</a> â€¢ Researcher @ <a href="https://stanfordasl.github.io/" target="_blank" rel="noopener">ASL</a></p>
            <p class="lead">Controls & Planning Ã— Reinforcement Learning 
              <span aria-hidden="true">Â·</span>
              <span class="nowrap">Robotics</span>
            </p>
          </div>
        </div>
        <nav class="links" aria-label="Primary">
          <a class="chip" href="mailto:dwivedi7@stanford.edu">Email</a>
          <!-- <a class="chip" href="data/ArpitDwivedi-CV.pdf">CV</a> -->
          <a class="chip" href="https://scholar.google.com/citations?user=bTxIik4AAAAJ&hl=en" target="_blank" rel="noopener">Google Scholar</a>
          <a class="chip" href="https://github.com/Dwivedi07/" target="_blank" rel="noopener">GitHub</a>
          <!-- Mobile preview toggle -->
          <button class="chip" id="viewToggle" aria-pressed="false" title="Toggle mobile preview">ðŸ“± Mobile preview</button>
        </nav>
      </div>
    </header>

    <main id="main">
      <!-- ===== About blurb ===== -->
      <section class="panel pad">
        <h2 class="section-title">About</h2>
        <p>
          I'm a master's student in Aeronautics & Astronautics at Stanford University, currently conducting research in the
          <a href="https://stanfordasl.github.io/" target="_blank" rel="noopener">Autonomous Systems Lab</a>
          advised by <a href="https://stanfordasl.github.io/people/prof-marco-pavone/" target="_blank" rel="noopener">Prof. Marco Pavone</a>. I am also working as a Research Assistant
          with <a href="https://www.timdesilva.me/" target="_blank" rel="noopener">Prof. Tim De Silva</a>ï¿¼, using Reinforcement learning to study and model human decision-making in macroeconomics and behavioral economics.
          Before Stanford, I completed a B.Tech. in Mechanical Engineering with Honors and a minor in AI & Data Science at
          <a href="https://www.iitb.ac.in/" target="_blank" rel="noopener">IIT Bombay</a>, where I worked with
          <a href="https://www.ee.iitb.ac.in/web/people/dwaipayan-mukherjee/" target="_blank" rel="noopener">Prof. Dwaipayan Mukherjee</a> in the Controls & Computing Lab.
          My interests span the intersection of control theory, machine learning, and decision making - with a focus on
          autonomous driving and space vehicles.
        </p>
      </section>

      <!-- ===== Highlights / Affiliations ===== -->
      <section>
        <div class="grid cols-3">
          <figure class="affil">
            <img src="images/stanfordlogo.png" alt="Stanford University logo" loading="lazy" />
            <figcaption>
              <strong>M.S. in AeroAstro (2024â€“2026)</strong><br />
              Stanford University
            </figcaption>
          </figure>
          <figure class="affil">
            <img src="images/Rivian_Logo_Alternative_1.png" alt="Rivian logo" loading="lazy" />
            <figcaption>
              <strong>Software Eng. Intern â€” Autonomy (2025)</strong><br />
              Rivian Automotive
            </figcaption>
          </figure>
          <figure class="affil">
            <img src="images/asl_blue.png" alt="Autonomous Systems Lab logo" loading="lazy" />
            <figcaption>
              <strong>Graduate Researcher (2024â€“present)</strong><br />
              Stanford ASL
            </figcaption>
          </figure>
        </div>
        <div class="grid cols-3" style="margin-top:16px;">
          <figure class="affil">
            <img src="images/logo.png" alt="IIT Bombay logo" loading="lazy" />
            <figcaption>
              <strong>B.Tech. Mechanical Eng. (2020â€“2024)</strong><br />
              IIT Bombay
            </figcaption>
          </figure>
          <figure class="affil">
            <img src="images/ubc-logo.jpg" alt="UBC logo" loading="lazy" />
            <figcaption>
              <strong>Research Intern (2023)</strong><br />
              UBC, Vancouver
            </figcaption>
          </figure>
          <figure class="affil">
            <img src="images/Umiclogo.png" alt="UMIC SeDriCa logo" loading="lazy" />
            <figcaption>
              <strong>Controls Engineer (2022â€“2024)</strong><br />
              UMIC â€” SeDriCa
            </figcaption>
          </figure>
        </div>
      </section>

      <!-- ===== Education & Teaching ===== -->
    <section class="panel pad">
      <h2 class="section-title">Education</h2>
    
      <article class="card">
        <img class="thumb logo" src="images/stanfordlogo.png" alt="Stanford University logo" loading="lazy" />
        <div class="card-body">
          <div class="title" style="color:var(--accent)">M.Sc. in Aeronautics &amp; Astronautics</div>
          <div class="meta">Department of Aeronautics &amp; Astronautics, Stanford University<br />2024â€“2026 Â· Stanford, CA, USA</div>
          <p><strong>Teaching Assistantships</strong></p>
          <ul class="edu-list">
            <li>ME 210: Introduction to Mechatronics (2026)</li>
            <li>CME 215: Machine Learning and Physical Science (2025)</li>
          </ul>
        </div>
      </article>
    
      <article class="card" style="margin-top:16px;">
        <img class="thumb logo" src="images/logo.png" alt="IIT Bombay logo" loading="lazy" />
        <div class="card-body">
          <div class="title" style="color:var(--accent)">
            B.Tech. in Mechanical Engineering (Honours)<br />
            <span class="meta">Minor in Artificial Intelligence &amp; Data Science</span>
          </div>
          <div class="meta">Indian Institute of Technology Bombay<br />2020â€“2024 Â· Mumbai, MH, India</div>
          <p><strong>Teaching Assistantships</strong></p>
          <ul class="edu-list">
            <li>CE 102: Engineering Mechanics (2022)</li>
          </ul>
        </div>
      </article>
    </section>



      <!-- ===== Professional Experience ===== -->
      <section class="panel pad">
        <h2 class="section-title">Professional Experience</h2>
        <article class="card">
          <img class="thumb logo" src="images/Rivian_Logo_Alternative_1.png" alt="Rivian internship" loading="lazy" />
          <div class="card-body">
            <div class="title" style="color:var(--accent)">Software Engineering Intern â€” Autonomy, Rivian Automotive</div>
            <div class="meta">Summer 2025</div>
            <p>Developing and testing autonomy stack modules for Rivian's vehicles, focusing on perception-planning integration and robust performance for real-world deployment.</p>
          </div>
        </article>
      </section>

      <!-- ===== Research Experience ===== -->
      <section class="panel pad">
        <h2 class="section-title">Research Experience</h2>
        <article class="card">
          <img class="thumb" src="images/trajopt.png" alt="FreeFlyer Solution" loading="lazy" />
          <div class="card-body">
            <div class="title" style="color:var(--accent)">Imitation Learning for Trajectory Optimization</div>
            <p>My work benchmarks sequence models - including Decision Transformer, S6-Mamba, and S4D - to warm-start nonlinear trajectory optimizers, with safety enforced through Sequential Convex Programming. The Decision Transformer demonstrated the strongest performance, achieving an 80% faster warm-start (0.37s), 42% lower runtime, and 14% higher feasibility compared to numerical solvers. I further deployed the learned controller on a Jetson AGX Orin within a ROS2 stack, where it achieved real-time open-loop execution and closed-loop flight through integrated MPC on Freeflyer robots.</p>
            <p><a href="https://github.com/Dwivedi07/SSM_based_Trajectory_Optimization" target="_blank" rel="noopener">Code</a></p>
          </div>
        </article>
        
        <article class="card">
          <img class="thumb" src="images/snakeclip.gif" alt="Snake robot locomotion clip" loading="lazy" />
          <div class="card-body">
            <div class="title" style="color:var(--accent)">Decentralized Control Strategy for Path-Following in Snake Robots</div>
            <div class="meta"><strong>Arpit Dwivedi</strong>, Hemanta Hazarika, Dwaipayan Mukherjee, Debasattam Pal â€¢ CoDIT 2025 â€” <span class="badge">Accepted</span></div>
            <p>Designed a modular snake robot and proposed a decentralized path-following controller exploiting local link autonomy to track general curves smoothly.</p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/turbinefloat.jpg" alt="Floating offshore wind turbines" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://ieeexplore.ieee.org/abstract/document/10684343" target="_blank" rel="noopener">Floating Offshore Wind Farm Control via Turbine Repositioning</a>
            <div class="meta">Yue Niu, <strong>Arpit Dwivedi</strong>, Joel Sathiraj, Parth P. Lathi, Ryozo Nagamune â€¢ <em>IEEE Control Systems</em>, Oct 2024</div>
            <p>Research intern @ UBC Control Engineering Lab. Repositioning strategies that unlock unique potential of floating offshore wind farms.</p>
            <p><a href="https://ieeexplore.ieee.org/abstract/document/10684343" target="_blank" rel="noopener">Paper</a></p>
          </div>
        </article>

        
      </section>

      <!-- ===== Key Projects ===== -->
      <section class="panel pad">
        <h2 class="section-title">Key Projects</h2>

        <article class="card">
          <img class="thumb logo" src="images/right.png" alt="End-to-end planning illustration" loading="lazy" />
          <div class="card-body">
            <div class="title" style="color:var(--accent)">Vision-Based End-to-End Planning for AVs</div>
            <div class="meta">Transformer vision encoder + LSTM trajectories; intent-aware planning on Waymo Open Dataset.</div>
            <p><a href="https://cs231n.stanford.edu/2025/papers/text_file_840589978-final_report.pdf" target="_blank" rel="noopener">Report</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/PickandPlaceArm.gif" alt="Vision-based pick-and-place manipulator" loading="lazy" />
          <div class="card-body">
            <div class="title" style="color:var(--accent)">Vision-based Pick & Place Manipulator</div>
            <div class="meta">Implemented a vision-based pick-and-place system that demonstrated object detection and manipulation capabilities. A U-Net-based segmentation model was implemented, achieving a mean Intersection over Union (mIoU) of 96% for accurate feature delineation in 2D images. Additionally, an end-to-end grasping algorithm utilizing grasping affordance maps was deployed to enhance object handling precision and reliability.</div>
          </div>
        </article>

      <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/GordonBotsy.jpeg" alt="Gordon Botsy autonomous bot" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://sites.google.com/stanford.edu/team-botatouille/home" target="_blank" rel="noopener">Gordon Botsy: Autonomous Bot</a>
            <div class="meta">Developed an autonomous bot capable of demonstrating reliability and efficiency in making a series of intelligent decisions to successfully complete the given challenge.</div>
            <p><a href="https://github.com/Dwivedi07/Mechatronics_GordonBotsy" target="_blank" rel="noopener">Code</a> Â· <a href="https://sites.google.com/stanford.edu/team-botatouille/home" target="_blank" rel="noopener">Website</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/multi.png" alt="Multi-robot navigation graphic" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://github.com/rohangarg2001/multi-robot-navigation" target="_blank" rel="noopener">Multirobot Navigation Under Uncertainty</a>
            <div class="meta">POMCP-DPW controller for lunar exploration scenarios.</div>
            <p><a href="https://github.com/rohangarg2001/multi-robot-navigation" target="_blank" rel="noopener">Code</a> Â· <a href="https://github.com/rohangarg2001/multi-robot-navigation/blob/main/AA228_FINAL_REPORT.pdf" target="_blank" rel="noopener">PDF</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/space.png" alt="Spacecraft attitude control graphic" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://github.com/Dwivedi07/Spacecraft-Attitude-Control" target="_blank" rel="noopener">Spacecraft Attitude Control</a>
            <div class="meta">Adaptive attitude tracking under inertia uncertainty; accurate tracking & parameter convergence.</div>
            <p><a href="https://github.com/Dwivedi07/Spacecraft-Attitude-Control" target="_blank" rel="noopener">Code</a> Â· <a href="https://github.com/Dwivedi07/Spacecraft-Attitude-Control/blob/main/SC617_REPORT.pdf" target="_blank" rel="noopener">PDF</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/GA.png" alt="Genetic algorithm coverage graphic" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://link.springer.com/book/10.1007/978-981-96-1158-4" target="_blank" rel="noopener">Coverage Maximization for UAV Surveillance on Non-convex Domains using GA</a>
            <div class="meta"><strong>Arpit Dwivedi</strong>, Chinmay Pimpalkhare â€¢ Advances in Multidisciplinary Design, Analysis and Optimization (NCMDAO), 2023</div>
            <p>This work develops a UAV surveillance framework for disaster management, focusing on maximizing coverage in non-convex and disconnected regions. The framework processes input images, extracts boundaries, and reduces complexity by approximating space as a union of polygons. A genetic algorithm with Monte Carlo sampling optimizes sensor configurations, leveraging problem geometry for efficient coverage.</p>
            <p><a href="https://github.com/Dwivedi07/Rescue_Robot_Optimization" target="_blank" rel="noopener">Code</a> Â· <a href="https://doi.org/10.1007/978-981-96-1158-4_46" target="_blank" rel="noopener">Paper</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/sedrica.png" alt="UMIC SeDriCa ego vehicle" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://umiciitb.org/" target="_blank" rel="noopener">UMIC-SeDriCa: Student Technical Team</a>
            <div class="meta">Controls Engineer (2022â€“2024) â€¢ Deployed Nonlinear MPC and performed real-time testing on an AV platform.</div>
            <p><a href="https://umiciitb.org/" target="_blank" rel="noopener">Website</a></p>
          </div>
        </article>

        <article class="card" style="margin-top:12px;">
          <img class="thumb" src="images/jet.jpg" alt="Jet impingement visualization" loading="lazy" />
          <div class="card-body">
            <a class="title" href="https://github.com/Dwivedi07/Jet_Impingement_Conical_Surface" target="_blank" rel="noopener">Jet Impingement Heat Transfer</a>
            <div class="meta">ANSYS Fluent simulations for cylindrical jet on flat and conical plates; validated Nusselt profiles against in-house experiments.</div>
            <p><a href="https://github.com/Dwivedi07/Jet_Impingement_Conical_Surface" target="_blank" rel="noopener">Repository</a></p>
          </div>
        </article>
      </section>

      <!-- ===== Academic Service ===== -->
      <section class="panel pad">
        <h2 class="section-title">Academic Service</h2>
        <p>Conference Reviewer: CDC 2025, CoDIT 2025, RSS (OOD Workshop) 2025</p>
      </section>
    </main>

    <footer>
      <p>Thanks to <a href="https://jonbarron.info/" target="_blank" rel="noopener">Jon Barron</a> for the original inspiration. <span aria-hidden="true">â€¢</span> Last updated <time datetime="2025-10-26">Oct 26, 2025</time>.</p>
    </footer>
  </div>

  <!-- Mobile preview toggle logic -->
  <script>
    (function () {
      const key = 'preview-mode';
      const btn = document.getElementById('viewToggle');

      function setMode(mode) {
        if (mode === 'mobile') {
          document.body.setAttribute('data-preview', 'mobile');
          btn.setAttribute('aria-pressed', 'true');
          btn.textContent = 'ðŸ’» Desktop preview';
          localStorage.setItem(key, 'mobile');
        } else {
          document.body.removeAttribute('data-preview');
          btn.setAttribute('aria-pressed', 'false');
          btn.textContent = 'ðŸ“± Mobile preview';
          localStorage.setItem(key, 'desktop');
        }
      }

      // Initial state from query param or localStorage
      const params = new URLSearchParams(location.search);
      const qp = params.get('preview');
      const saved = localStorage.getItem(key);

      if (qp === 'mobile' || saved === 'mobile') {
        setMode('mobile');
      } else {
        setMode('desktop');
      }

      // Toggle on click
      btn.addEventListener('click', () => {
        const isMobile = document.body.getAttribute('data-preview') === 'mobile';
        setMode(isMobile ? 'desktop' : 'mobile');
      });
    })();
  </script>
</body>
</html>
